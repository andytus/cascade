

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html"
      lang="en">
<head>
    {% load compressed %}

    {% compressed_css 'cartlogic' %}

   <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}css/font-awesome.min.css">

    {% block styles %}

    {% endblock %}

    <title>  {% block title %} {% endblock %} </title>
</head>
<body>
<div id="top" class="row">
{% block navbar %}
    <div class="navbar">
        <div class="navbar-inner">
            <div class="container-fluid">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a id="menu-title" class="brand" href="#"> Welcome To Cart Logic </a>

                <div class="nav-collapse collapse">
                    <!-- all will collapse or hide at 940px-->
                    <form id="cart_search_form" class="navbar-form pull-left" action="{% url cart_search %}">
                        <input id="search_query" name="search_query" type="hidden" data-bind="value: search_query"/>

                        <div class="input-append input-prepend">
                            <!--Search Button Group-->
                            <div class="btn-group">
                                <a tabindex="1" class="btn dropdown-toggle" data-toggle="dropdown">
                                    <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu pull-left span3">
                                    <!--dropdown menu links  -->
                                    <li><a id="serial_number" title="e.g. 9600001" data-bind="click: getSearchInfo"><i
                                            class="icon-barcode"></i>Serial</a></li>
                                    <li><a id="address" title="e.g. 201 Market St SW"
                                           data-bind="click: getSearchInfo"><i class="icon-home"></i>Address</a>
                                    </li>
                                    <li><a id="size" title="e.g. 35, 64, 96" data-bind="click: getSearchInfo"><i
                                            class="icon-trash"></i>Size</a></li>
                                    <li><a id="type" title="e.g. Recycle, Refuse"
                                           data-bind="click: getSearchInfo"><i
                                            class="icon-asterisk"></i>Type</a></li>
                                    <li><a id="status" title="e.g. Delivered, Produced, Lost, ect.."
                                           data-bind="click: getSearchInfo"><i
                                            class="icon-flag"></i>Status</a></li>
                                </ul>
                                <input tabindex="2" id="cart_search_input" class="span3" type="text"
                                       placeholder="Search Carts"
                                       data-bind="attr:{placeholder: search_placeholder}, value: search_value"/>
                                <button tabindex="3" class="btn" type="submit"><span class="icon-search"></span>
                                </button>
                            </div>
                        </div>
                    </form>
                    <ul id="top-menu" class="nav nav-pills pull-left" style="padding: 8px 10px 10px 20px">
                   {% comment %}     <li class="active">
                            <a href="#">About</a>
                        </li>{% endcomment %}
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#tickets">
                                Tickets
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a id="new-ticket-link" href="{% url ticket_app_new %}New" data-target="#modal_window"
                                       data-toggle="modal">New</a></li>
                                <li><a href="{% url tickets_completed_upload %}">Submit Completed (UPLOAD)</a></li>
                                <li><a href="{% url ticket_app_report %}">Reports (DOWNLOAD)</a></li>
                            </ul>
                        </li>

                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#Customer">
                                Customer
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="{% url customer_app_new %}" data-target="#modal_window"
                                       data-toggle="modal">New</a></li>
                                {% if request.user.is_superuser %}
                                <li><a href="{% url customer_app_report %}">Reports</a></li>
                                {% endif %}
                            </ul>

                        </li>

                        {% if user.is_superuser %}
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#Customer">
                                Carts
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="{% url cart_app_report %}">Reports</a></li>
                            </ul>
                        </li>



                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#Customer">
                                Admin
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="{% url customer_uploads %}">upload customers</a></li>
                            </ul>

                        </li>
                        {% endif %}

                    </ul>
                    <div id="login_link" class="pull-right">
                        {% if user %}
                            {{ user.username }} | <a href="{% url django.contrib.auth.views.logout %}">Logout</a>
                        {% else %}
                            <a href="{% url django.contrib.auth.views.login %}">Login</a>
                        {% endif %}

                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}



<!-- Modals -->

<div id="modal_window" class="modal hide fade" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

    <div class="modal-body">
     Loading...
    </div>

</div>


{% block page %}
    <div id="middle" class="container-fluid">

        <div id="message" class="alert message">
            <a class="close">Ã—</a>
            <strong id="message-type"></strong><span id="message-text"></span>
        </div>

        <div class="row-fluid">
            <div id="left" class="span2">

                {% block left %}

                {% endblock %}
            </div>

            <div id="main" class="span8">
                {% block main_content %}
                {% endblock %}
            </div>

            <div id="right" class="span2">
                <div id="loading-message" class="alert message">
                <p id="loading-message-text"></p>
                </div>
                {% block right %}
                {% endblock %}
            </div>
        </div>
    </div>
{% endblock %}


<script type="text/javascript">
    //added cart logic namespace
    window.cartlogic = {};
</script>



<script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBcDSYkOfnoKvp7Fjk-3u0Gwxx-d7a1GW8&sensor=false">
</script>


{% load compressed %}
{% compressed_js 'views_cart_search' %}
{% compressed_js 'models_cart_type' %}
{% compressed_js 'ajax' %}

<script type="text/javascript" src="{{ STATIC_URL }}js/vendor/jquery/jquery.min.js"></script>

<script type="text/javascript" src="{{ STATIC_URL }}js/vendor/bootstrap/bootstrap.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/vendor/bootstrap/bootstrap-tab.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/vendor/knockout/knockout-2.2.0.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/vendor/knockout/knockout.mapping.js"></script>

{% comment %}
<script type="text/javascript" src="{{ STATIC_URL }}js/utilities/ajax.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/cartmanager/views/CartSearchViewModel.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/cartmanager/models/cart_type.js"></script>
{% endcomment %}


<script type="text/javascript">
    //Globals for each page go here:

    var static_url = "{{ STATIC_URL }}";
    var ticket_api = "{% url ticket_api %}";
    var new_customer_url = "{% url customer_app_new %}";

    //simply hide the message bar:
    $('#message').hide();

    //utility function sets ups security token for ajax calls
    utilities.setupAjax();

    // var cart_search =  new app.cart_search();
    ko.applyBindings(new cartlogic.CartSearchViewModel(), document.getElementById('cart_search_form'));

    //add to destroy modal content on close in order to properly refresh (i.e. new ticket, should not display previous
    //info)
    $('.modal').on('hidden', function () {
       $('.modal').data('modal', null);
    });

</script>

{% block page_scripts %}

{% endblock %}


</body>
</html>